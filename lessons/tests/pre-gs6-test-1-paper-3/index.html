<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bài Kiểm Tra Ngữ Pháp - Grammar Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @media print {
            .print\:hidden { display: none !important; }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="test-paper max-w-2xl mx-auto bg-white shadow-lg rounded-lg p-8 mt-8">
        <div class="header text-center mb-8">
            <h3 class="text-xl font-bold text-blue-800">PRE GRADE 6 - ENGLISH GRAMMAR TEST 3 - (PAPER 3)</h3>
            <p class="mb-2"><strong>Time:</strong> 45 minutes | <strong>Full name:</strong> <input type="text" class="border-b border-gray-400 outline-none px-2 print:hidden" style="width:220px" /></p>
        </div>
        <form id="grammarTest">
        <!-- Phần 1: Trắc nghiệm -->
        <div class="section mb-8">
            <div class="section-title font-semibold mb-3">Phần 1: Trắc nghiệm (2 điểm) - Multiple Choice (2 marks)</div>
            <p class="mb-4">Chọn đáp án đúng nhất (Choose the best answer):</p>
            <!-- MCQ Questions -->
            <div class="space-y-4">
                <div class="question">
                    <label>1. Which of the following is a countable noun?</label>
                    <div class="ml-4 space-y-1">
                        <label><input type="radio" name="mcq1" value="A" class="mr-2">A. love</label><br>
                        <label><input type="radio" name="mcq1" value="B" class="mr-2">B. cousin</label><br>
                        <label><input type="radio" name="mcq1" value="C" class="mr-2">C. happiness</label><br>
                        <label><input type="radio" name="mcq1" value="D" class="mr-2">D. advice</label>
                    </div>
                </div>
                <div class="question">
                    <label>2. Choose the correct plural form of "man":</label>
                    <div class="ml-4 space-y-1">
                        <label><input type="radio" name="mcq2" value="A" class="mr-2">A. mans</label><br>
                        <label><input type="radio" name="mcq2" value="B" class="mr-2">B. men</label><br>
                        <label><input type="radio" name="mcq2" value="C" class="mr-2">C. manes</label><br>
                        <label><input type="radio" name="mcq2" value="D" class="mr-2">D. mens</label>
                    </div>
                </div>
                <div class="question">
                    <label>3. Which noun is uncountable?</label>
                    <div class="ml-4 space-y-1">
                        <label><input type="radio" name="mcq3" value="A" class="mr-2">A. uncle</label><br>
                        <label><input type="radio" name="mcq3" value="B" class="mr-2">B. aunt</label><br>
                        <label><input type="radio" name="mcq3" value="C" class="mr-2">C. information</label><br>
                        <label><input type="radio" name="mcq3" value="D" class="mr-2">D. brother</label>
                    </div>
                </div>
                <div class="question">
                    <label>4. We need to buy ___ bread for the family.</label>
                    <div class="ml-4 space-y-1">
                        <label><input type="radio" name="mcq4" value="A" class="mr-2">A. a</label><br>
                        <label><input type="radio" name="mcq4" value="B" class="mr-2">B. an</label><br>
                        <label><input type="radio" name="mcq4" value="C" class="mr-2">C. some</label><br>
                        <label><input type="radio" name="mcq4" value="D" class="mr-2">D. the</label>
                    </div>
                </div>
                <div class="question">
                    <label>5. She gave ___ gift to ___ mother.</label>
                    <div class="ml-4 space-y-1">
                        <label><input type="radio" name="mcq5" value="A" class="mr-2">A. a/her</label><br>
                        <label><input type="radio" name="mcq5" value="B" class="mr-2">B. the/a</label><br>
                        <label><input type="radio" name="mcq5" value="C" class="mr-2">C. an/a</label><br>
                        <label><input type="radio" name="mcq5" value="D" class="mr-2">D. the/the</label>
                    </div>
                </div>
                <div class="question">
                    <label>6. There aren't ___ cousins at the party.</label>
                    <div class="ml-4 space-y-1">
                        <label><input type="radio" name="mcq6" value="A" class="mr-2">A. some</label><br>
                        <label><input type="radio" name="mcq6" value="B" class="mr-2">B. any</label><br>
                        <label><input type="radio" name="mcq6" value="C" class="mr-2">C. a</label><br>
                        <label><input type="radio" name="mcq6" value="D" class="mr-2">D. an</label>
                    </div>
                </div>
                <div class="question">
                    <label>7. The correct position of the noun in this sentence is:</label>
                    <div class="ml-4 space-y-1">
                        <label><input type="radio" name="mcq7" value="A" class="mr-2">A. He friendly has a brother.</label><br>
                        <label><input type="radio" name="mcq7" value="B" class="mr-2">B. He has a friendly brother.</label><br>
                        <label><input type="radio" name="mcq7" value="C" class="mr-2">C. Friendly he has a brother.</label><br>
                        <label><input type="radio" name="mcq7" value="D" class="mr-2">D. He has brother a friendly.</label>
                    </div>
                </div>
                <div class="question">
                    <label>8. Which pronoun replaces "Anna and me" as object?</label>
                    <div class="ml-4 space-y-1">
                        <label><input type="radio" name="mcq8" value="A" class="mr-2">A. we</label><br>
                        <label><input type="radio" name="mcq8" value="B" class="mr-2">B. us</label><br>
                        <label><input type="radio" name="mcq8" value="C" class="mr-2">C. our</label><br>
                        <label><input type="radio" name="mcq8" value="D" class="mr-2">D. they</label>
                    </div>
                </div>
                <div class="question">
                    <label>9. The plural of "woman" is:</label>
                    <div class="ml-4 space-y-1">
                        <label><input type="radio" name="mcq9" value="A" class="mr-2">A. womans</label><br>
                        <label><input type="radio" name="mcq9" value="B" class="mr-2">B. women</label><br>
                        <label><input type="radio" name="mcq9" value="C" class="mr-2">C. womanies</label><br>
                        <label><input type="radio" name="mcq9" value="D" class="mr-2">D. womanses</label>
                    </div>
                </div>
                <div class="question">
                    <label>10. Which sentence uses articles correctly?</label>
                    <div class="ml-4 space-y-1">
                        <label><input type="radio" name="mcq10" value="A" class="mr-2">A. I have uncle in my family.</label><br>
                        <label><input type="radio" name="mcq10" value="B" class="mr-2">B. I have an uncle in the family.</label><br>
                        <label><input type="radio" name="mcq10" value="C" class="mr-2">C. I have a uncle in family.</label><br>
                        <label><input type="radio" name="mcq10" value="D" class="mr-2">D. I have the uncle at a family.</label>
                    </div>
                </div>
            </div>
        </div>
        <!-- Phần 2: Điền từ -->
        <div class="section mb-8">
            <div class="section-title font-semibold mb-3">Phần 2: Điền từ (1.5 điểm) - Fill in the blanks (1.5 marks)</div>
            <p class="mb-4">Điền từ thích hợp vào chỗ trống (Fill in the blanks with appropriate words):</p>
            <div class="space-y-4">
                <div class="question">1. There are many <input type="text" name="blank1" class="border-b border-gray-400 w-24 px-1"> (brother) in my family.</div>
                <div class="question">2. Would you like <input type="text" name="blank2" class="border-b border-gray-400 w-24 px-1"> (a/an/some) cake?</div>
                <div class="question">3. She doesn't have <input type="text" name="blank3" class="border-b border-gray-400 w-24 px-1"> (some/any) sisters.</div>
                <div class="question">4. <input type="text" name="blank4" class="border-b border-gray-400 w-24 px-1"> (A/An/The) father is working now.</div>
                <div class="question">5. Please give this photo to <input type="text" name="blank5" class="border-b border-gray-400 w-24 px-1"> (she/her).</div>
            </div>
        </div>
        <!-- Phần 3: Tìm lỗi sai -->
        <div class="section mb-8">
            <div class="section-title font-semibold mb-3">Phần 3: Tìm lỗi sai (1.5 điểm) - Error Correction (1.5 marks)</div>
            <p class="mb-4">Tìm lỗi sai và viết lại câu đúng (Find the error and rewrite the sentence correctly):</p>
            <div class="space-y-4">
                <div class="question">1. I have two mans.<br>
                    <textarea name="err1" class="border border-gray-300 rounded w-full mt-1 p-1" rows="1"></textarea>
                </div>
                <div class="question">2. She needs some advices about her friend.<br>
                    <textarea name="err2" class="border border-gray-300 rounded w-full mt-1 p-1" rows="1"></textarea>
                </div>
                <div class="question">3. There isn't some bread on the table.<br>
                    <textarea name="err3" class="border border-gray-300 rounded w-full mt-1 p-1" rows="1"></textarea>
                </div>
                <div class="question">4. Me and my cousin are going to the park.<br>
                    <textarea name="err4" class="border border-gray-300 rounded w-full mt-1 p-1" rows="1"></textarea>
                </div>
                <div class="question">5. They gave the present to I last week.<br>
                    <textarea name="err5" class="border border-gray-300 rounded w-full mt-1 p-1" rows="1"></textarea>
                </div>
            </div>
        </div>
        <!-- Phần 4: Điền từ vào đoạn văn -->
        <div class="section mb-8">
            <div class="section-title font-semibold mb-3">Phần 4: Điền từ vào đoạn văn (2 điểm) - Cloze Test (2 marks)</div>
            <p class="mb-4">Điền từ thích hợp vào chỗ trống trong đoạn văn sau (Fill in the blanks with appropriate words):</p>
            <p>
                Yesterday, I went to <input type="text" name="cloze1" class="border-b border-gray-400 w-20 px-1"> house to visit my grandparents. 
                First, I greeted <input type="text" name="cloze2" class="border-b border-gray-400 w-20 px-1"> aunt and <input type="text" name="cloze3" class="border-b border-gray-400 w-20 px-1"> uncle. Then I needed to get <input type="text" name="cloze4" class="border-b border-gray-400 w-20 px-1"> cookies, but they didn't have <input type="text" name="cloze5" class="border-b border-gray-400 w-20 px-1"> left. My family was very happy to see me.
            </p>
        </div>
        <!-- Phần 5: Viết câu hoàn chỉnh -->
        <div class="section mb-8">
            <div class="section-title font-semibold mb-3">Phần 5: Viết câu hoàn chỉnh (3 điểm) - Sentence Writing (3 marks)</div>
            <p class="mb-4">Viết câu hoàn chỉnh sử dụng từ/cụm từ gợi ý (Write complete sentences using the given words/phrases):</p>
            <div class="space-y-4">
                <div class="question">1. He / have / sister / family.<br>
                    <textarea name="sent1" class="border border-gray-300 rounded w-full mt-1 p-1" rows="1"></textarea>
                </div>
                <div class="question">2. There / be / some / bread / table.<br>
                    <textarea name="sent2" class="border border-gray-300 rounded w-full mt-1 p-1" rows="1"></textarea>
                </div>
                <div class="question">3. We / not have / any / pets / home.<br>
                    <textarea name="sent3" class="border border-gray-300 rounded w-full mt-1 p-1" rows="1"></textarea>
                </div>
                <div class="question">4. Grandma / kind / today.<br>
                    <textarea name="sent4" class="border border-gray-300 rounded w-full mt-1 p-1" rows="1"></textarea>
                </div>
                <div class="question">5. Would / like / apple?<br>
                    <textarea name="sent5" class="border border-gray-300 rounded w-full mt-1 p-1" rows="1"></textarea>
                </div>
            </div>
        </div>
        <div class="flex justify-center mt-8 print:hidden">
            <button type="button" onclick="gradeTest()" class="bg-blue-600 text-white px-6 py-2 rounded shadow hover:bg-blue-700 font-semibold">Nộp bài / Submit</button>
        </div>
        <div id="result" class="mt-8 text-center text-lg font-bold print:hidden" style="display:none"></div>
        </form>
    </div>
    <script>
    // Đáp án
    const answers = {
        mcq1: 'B',
        mcq2: 'B',
        mcq3: 'C',
        mcq4: 'C',
        mcq5: 'A',
        mcq6: 'B',
        mcq7: 'B',
        mcq8: 'B',
        mcq9: 'B',
        mcq10: 'B',
        blank1: ['brothers'],
        blank2: ['some'],
        blank3: ['any'],
        blank4: ['the'],
        blank5: ['her'],
        err1: ['I have two men.'],
        err2: ['She needs some advice about her friend.'],
        err3: ["There isn't any bread on the table."],
        err4: ['My cousin and I are going to the park.','I and my cousin are going to the park.'],
        err5: ['They gave the present to me last week.'],
        cloze1: ['the'],
        cloze2: ['my'],
        cloze3: ['my'],
        cloze4: ['some'],
        cloze5: ['any'],
        sent1: [/he\s+has\s+a\s+sister\s+in\s+his\s+family\.?/i],
        sent2: [/there\s+is\s+some\s+bread\s+on\s+the\s+table\.?/i],
        sent3: [/we\s+do\s+not\s+have\s+any\s+pets\s+at\s+home\.?/i, /we\s+don't\s+have\s+any\s+pets\s+at\s+home\.?/i],
        sent4: [/grandma\s+is\s+kind\s+today\.?/i],
        sent5: [/would\s+you\s+like\s+an\s+apple\??/i],
    };
    function gradeTest() {
        let score = 0;
        let total = 10 + 5 + 5 + 5 + 5; // MCQ + blank + err + cloze + sent
        let form = document.forms['grammarTest'];
        // Reset all highlights
        // MCQ
        for(let i=1;i<=10;i++){
            let radios = form[`mcq${i}`];
            if (!radios) continue;
            let radioList = form.querySelectorAll(`input[name=mcq${i}]`);
            radioList.forEach(radio => {
                radio.parentElement.classList.remove('bg-green-100','border-green-500','bg-red-100','border-red-500','border-2');
            });
        }
        // Inputs
        let allInputs = form.querySelectorAll('input[type=text], textarea');
        allInputs.forEach(input => {
            input.classList.remove('bg-green-100','border-green-500','bg-red-100','border-red-500','border-2');
        });

        // MCQ
        for(let i=1;i<=10;i++){
            let val = form[`mcq${i}`]?.value;
            let radioList = form.querySelectorAll(`input[name=mcq${i}]`);
            radioList.forEach(radio => {
                if(radio.checked){
                    if(radio.value === answers[`mcq${i}`]){
                        radio.parentElement.classList.add('bg-green-100','border-green-500','border-2');
                        score++;
                    } else {
                        radio.parentElement.classList.add('bg-red-100','border-red-500','border-2');
                    }
                }
                // Không highlight đáp án đúng nếu học sinh không chọn
            });
        }
        // Fill in blank
        if(form.blank1.value.trim().toLowerCase() === answers.blank1[0]){
            form.blank1.classList.add('bg-green-100','border-green-500','border-2'); score++;
        } else {
            form.blank1.classList.add('bg-red-100','border-red-500','border-2');
        }
        if(form.blank2.value.trim().toLowerCase() === answers.blank2[0]){
            form.blank2.classList.add('bg-green-100','border-green-500','border-2'); score++;
        } else {
            form.blank2.classList.add('bg-red-100','border-red-500','border-2');
        }
        if(form.blank3.value.trim().toLowerCase() === answers.blank3[0]){
            form.blank3.classList.add('bg-green-100','border-green-500','border-2'); score++;
        } else {
            form.blank3.classList.add('bg-red-100','border-red-500','border-2');
        }
        if(form.blank4.value.trim().toLowerCase() === answers.blank4[0]){
            form.blank4.classList.add('bg-green-100','border-green-500','border-2'); score++;
        } else {
            form.blank4.classList.add('bg-red-100','border-red-500','border-2');
        }
        if(form.blank5.value.trim().toLowerCase() === answers.blank5[0]){
            form.blank5.classList.add('bg-green-100','border-green-500','border-2'); score++;
        } else {
            form.blank5.classList.add('bg-red-100','border-red-500','border-2');
        }
        // Error correction
        if(form.err1.value.trim().toLowerCase() === answers.err1[0].toLowerCase()){
            form.err1.classList.add('bg-green-100','border-green-500','border-2'); score++;
        } else {
            form.err1.classList.add('bg-red-100','border-red-500','border-2');
        }
        if(form.err2.value.trim().toLowerCase() === answers.err2[0].toLowerCase()){
            form.err2.classList.add('bg-green-100','border-green-500','border-2'); score++;
        } else {
            form.err2.classList.add('bg-red-100','border-red-500','border-2');
        }
        if(form.err3.value.trim().toLowerCase() === answers.err3[0].toLowerCase()){
            form.err3.classList.add('bg-green-100','border-green-500','border-2'); score++;
        } else {
            form.err3.classList.add('bg-red-100','border-red-500','border-2');
        }
        if(answers.err4.some(ans => form.err4.value.trim().toLowerCase() === ans.toLowerCase())){
            form.err4.classList.add('bg-green-100','border-green-500','border-2'); score++;
        } else {
            form.err4.classList.add('bg-red-100','border-red-500','border-2');
        }
        if(form.err5.value.trim().toLowerCase() === answers.err5[0].toLowerCase()){
            form.err5.classList.add('bg-green-100','border-green-500','border-2'); score++;
        } else {
            form.err5.classList.add('bg-red-100','border-red-500','border-2');
        }
        // Cloze
        if(form.cloze1.value.trim().toLowerCase() === answers.cloze1[0]){
            form.cloze1.classList.add('bg-green-100','border-green-500','border-2'); score++;
        } else {
            form.cloze1.classList.add('bg-red-100','border-red-500','border-2');
        }
        if(form.cloze2.value.trim().toLowerCase() === answers.cloze2[0]){
            form.cloze2.classList.add('bg-green-100','border-green-500','border-2'); score++;
        } else {
            form.cloze2.classList.add('bg-red-100','border-red-500','border-2');
        }
        if(form.cloze3.value.trim().toLowerCase() === answers.cloze3[0]){
            form.cloze3.classList.add('bg-green-100','border-green-500','border-2'); score++;
        } else {
            form.cloze3.classList.add('bg-red-100','border-red-500','border-2');
        }
        if(form.cloze4.value.trim().toLowerCase() === answers.cloze4[0]){
            form.cloze4.classList.add('bg-green-100','border-green-500','border-2'); score++;
        } else {
            form.cloze4.classList.add('bg-red-100','border-red-500','border-2');
        }
        if(form.cloze5.value.trim().toLowerCase() === answers.cloze5[0]){
            form.cloze5.classList.add('bg-green-100','border-green-500','border-2'); score++;
        } else {
            form.cloze5.classList.add('bg-red-100','border-red-500','border-2');
        }
        // Sentence writing (regex)
        if(answers.sent1.some(r=>r.test(form.sent1.value.trim()))){
            form.sent1.classList.add('bg-green-100','border-green-500','border-2'); score++;
        } else {
            form.sent1.classList.add('bg-red-100','border-red-500','border-2');
        }
        if(answers.sent2.some(r=>r.test(form.sent2.value.trim()))){
            form.sent2.classList.add('bg-green-100','border-green-500','border-2'); score++;
        } else {
            form.sent2.classList.add('bg-red-100','border-red-500','border-2');
        }
        if(answers.sent3.some(r=>r.test(form.sent3.value.trim()))){
            form.sent3.classList.add('bg-green-100','border-green-500','border-2'); score++;
        } else {
            form.sent3.classList.add('bg-red-100','border-red-500','border-2');
        }
        if(answers.sent4.some(r=>r.test(form.sent4.value.trim()))){
            form.sent4.classList.add('bg-green-100','border-green-500','border-2'); score++;
        } else {
            form.sent4.classList.add('bg-red-100','border-red-500','border-2');
        }
        if(answers.sent5.some(r=>r.test(form.sent5.value.trim()))){
            form.sent5.classList.add('bg-green-100','border-green-500','border-2'); score++;
        } else {
            form.sent5.classList.add('bg-red-100','border-red-500','border-2');
        }
        // Show result
        document.getElementById('result').style.display = '';
        document.getElementById('result').innerHTML = `Điểm của bạn: <span class=\"text-blue-700\">${score} / 30</span>`;
    }
    </script>
</body>
</html>