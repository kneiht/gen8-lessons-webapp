<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prepositions - Worksheets</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <style>
        /* Base styles */
        html {
            font-size: 20px;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f9fafb;
        }

        /* Page setup for printing */
        @page {
            size: A4;
            margin: 20px 5px;
        }

        /* Print styles */
        @media print {
            .no-print {
                display: none !important;
            }

            .print-only {
                display: block !important;
            }

            body {
                font-size: 14px;
                -webkit-print-color-adjust: exact;
                color-adjust: exact;
            }

            .worksheet-container {
                padding: 0;
                margin: 0;
                box-shadow: none;
            }

            /* Ensure colors print correctly */
            .bg-blue-100,
            .bg-yellow-50,
            .bg-green-50,
            .bg-blue-50,
            .bg-purple-50,
            .bg-pink-50,
            .text-blue-600 {
                -webkit-print-color-adjust: exact;
                color-adjust: exact;
            }

            .highlight {
                background-color: #fef08a !important;
            }

            .correct {
                color: #16a34a !important;
            }

            .incorrect {
                color: #dc2626 !important;
            }
        }

        /* Container styles */
        .worksheet-container {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1rem;
            margin-bottom: 0.75rem;
        }

        /* Typography */
        .worksheet-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #2563eb;
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1f2937;
        }

        .subsection-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1f2937;
        }

        /* Input styles */
        .answer-input {
            border-bottom: 1px dashed #4b5563;
            min-width: 80px;
            display: inline-block;
            text-align: center;
            padding: 0.25rem 0.5rem;
        }

        /* Highlight and feedback styles */
        .highlight {
            background-color: #fef08a;
        }

        .correct {
            color: #16a34a;
        }

        .incorrect {
            color: #dc2626;
        }

        /* Card styles */
        .info-card {
            background-color: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 0.5rem;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }

        /* Section background colors */
        .bg-yellow-50 {
            background-color: #fefce8;
            border-left: 4px solid #facc15;
        }

        .bg-green-50 {
            background-color: #f0fdf4;
            border-left: 4px solid #22c55e;
        }

        .bg-blue-50 {
            background-color: #eff6ff;
            border-left: 4px solid #3b82f6;
        }

        .bg-purple-50 {
            background-color: #faf5ff;
            border-left: 4px solid #a855f7;
        }

        .bg-pink-50 {
            background-color: #fdf2f8;
            border-left: 4px solid #ec4899;
        }

        /* Vocabulary card styles */
        .vocab-card {
            background-color: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 0.5rem;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }

        .vocab-word {
            font-weight: 500;
            color: #1f2937;
            margin-bottom: 0.25rem;
        }

        .vocab-type {
            color: #6b7280;
        }

        .vocab-meaning {
            color: #374151;
        }

        /* Exercise styles */
        .exercise-container {
            background-color: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 0.75rem 1.5rem;
            margin-bottom: 0.75rem;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            width: 100%;
        }

        .exercise-title {
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }

        .exercise-instruction {
            color: #4b5563;
            margin-bottom: 0.5rem;
        }

        /* Radio button styles */
        .radio-group {
            display: flex;
            gap: 1rem;
            padding: 0rem 0.5rem;
            border-radius: 0.5rem;
        }

        .radio-label {
            display: inline-flex;
            align-items: center;
        }

        .radio-input {
            margin-right: 0.5rem;
        }

        /* Responsive styles */
        @media (min-width: 640px) {
            .grid-2-cols {
                display: grid;
                grid-template-columns: repeat(2, minmax(0, 1fr));
                gap: 1rem;
            }

            .grid-3-cols {
                display: grid;
                grid-template-columns: repeat(3, minmax(0, 1fr));
                gap: 0.5rem;
            }
        }

        /* Utility classes */
        .text-gray-700 {
            color: #374151;
        }

        .text-gray-800 {
            color: #1f2937;
        }

        .text-gray-500 {
            color: #6b7280;
        }

        .mb-2 {
            margin-bottom: 0.5rem;
        }

        .mb-3 {
            margin-bottom: 0.75rem;
        }

        .mb-4 {
            margin-bottom: 1rem;
        }

        .p-2 {
            padding: 0.5rem;
        }

        .p-4 {
            padding: 1rem;
        }

        .rounded-lg {
            border-radius: 0.5rem;
        }

        /* Print-specific styles */
        @media print {
            .worksheet-title {
                font-size: 1.125rem;
            }

            .section-title {
                font-size: 0.875rem;
            }

            .subsection-title {
                font-size: 0.875rem;
            }
        }

        /* Preposition map styles */
        .preposition-map {
            position: relative;
            height: 300px;
            background-color: #e5e7eb;
            border-radius: 0.5rem;
            margin: 1rem 0;
        }

        .destination-icon {
            position: absolute;
            width: 30px;
            height: 30px;
            background-color: #3b82f6;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
        }

        .arrow {
            position: absolute;
            height: 2px;
            background-color: #ef4444;
            transform-origin: left center;
        }

        .arrow::after {
            content: '';
            position: absolute;
            right: 0;
            top: -4px;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 5px 0 5px 8px;
            border-color: transparent transparent transparent #ef4444;
        }

        /* Drag and drop styles */
        .drop-zone {
            min-height: 50px;
            border: 2px dashed #9ca3af;
            border-radius: 0.5rem;
            padding: 0.5rem;
            margin: 0.5rem 0;
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .draggable-item {
            background-color: #e5e7eb;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            cursor: move;
            user-select: none;
        }

        .draggable-item.dragging {
            opacity: 0.5;
        }
    </style>
</head>

<body class="bg-blue-100">
    <div class="px-4 py-6 print:py-0 pb-6 w-full">
        <div class="worksheet-container">
            <!-- Header -->
            <div class="flex justify-between items-center my-4">
                <h1 class="worksheet-title">Prepositions in English (Giới từ trong tiếng Anh) – Worksheets</h1>
                <button onclick="printWorksheet()"
                    class="print:hidden bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-lg flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20"
                        fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M5 4v3H4a2 2 0 00-2 2v3a2 2 0 002 2h1v2a2 2 0 002 2h6a2 2 0 002-2v-2h1a2 2 0 002-2V9a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z"
                            clip-rule="evenodd" />
                    </svg>
                    Print Worksheet
                </button>

                <p class="hidden print:block text-center text-gray-600">Student: _______________________ Date:
                    _______________</p>
            </div>

            
            <!-- Front Page -->
            <div class="mb-3">
                <div class="flex items-center mb-3">
                    <div class="w-5 h-5 bg-yellow-400 rounded-full flex items-center justify-center mr-3">
                        <span class="font-bold text-white">1</span>
                    </div>
                    <h3 class="section-title">Part 1: Key Notes (Tóm tắt kiến thức)</h3>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 gap-2">
                    <div class="info-card bg-yellow-50">
                        <h4 class="subsection-title">1. What are prepositions? (Giới từ là gì?)</h4>
                        <p class="text-gray-700 mb-3">Prepositions are words used to show the relationship between words
                            in a sentence.</p>
                        <p class="text-gray-700 mb-3">Giới từ là từ dùng để diễn tả mối quan hệ giữa các từ trong câu.
                        </p>
                        <p class="text-gray-700 italic">Example (Ví dụ): The book is on the table. (Quyển sách ở TRÊN
                            bàn)</p>
                        <div class="bg-blue-100 p-2 rounded mt-2">
                            <p class="text-blue-800 font-medium">💡 Remember (Ghi nhớ):</p>
                            <p class="text-gray-700">Prepositions usually come before nouns/pronouns/noun phrases to
                                connect them with other words in the sentence.</p>
                            <p class="text-gray-700">Giới từ thường đứng trước danh từ/đại từ/cụm danh từ để nối chúng
                                với các từ khác trong câu.</p>
                        </div>
                    </div>

                    <div class="info-card bg-green-50">
                        <h4 class="subsection-title">2. What do prepositions do? (Giới từ làm gì trong câu?)</h4>
                        <p class="text-gray-700 mb-3">Prepositions show relationships between words regarding:</p>
                        <p class="text-gray-700 mb-3">Giới từ chỉ ra mối quan hệ giữa các từ về:</p>
                        <ul class="list-disc pl-5 text-gray-700">
                            <li class="mb-1">Position (Vị trí): in, on, at, under...</li>
                            <li class="mb-1">Time (Thời gian): before, after, during...</li>
                            <li class="mb-1">Direction (Phương hướng): to, from, into, out of...</li>
                            <li>Purpose (Mục đích): for, about...</li>
                        </ul>
                        <div class="bg-blue-100 p-2 rounded mt-2">
                            <p class="text-blue-800 font-medium">Question (Câu hỏi):</p>
                            <p class="text-gray-700">In the sentence "She went to school", what does "to" indicate?</p>
                            <p class="text-gray-700">Trong câu "She went to school", "to" là giới từ chỉ gì?</p>
                            <button onclick="toggleAnswer(this)"
                                class="mt-1 text-blue-600 hover:text-blue-800 text-sm">Show Answer (Xem đáp án)</button>
                            <p class="hidden text-gray-700 mt-1">"to" indicates direction (chỉ phương hướng)</p>
                        </div>
                    </div>

                    <div class="info-card bg-blue-50">
                        <h4 class="subsection-title">3. Prepositions of place (Giới từ chỉ vị trí)</h4>
                        <p class="text-gray-700 mb-3">The most common prepositions of place:</p>
                        <p class="text-gray-700 mb-3">Những giới từ phổ biến nhất:</p>
                        <table class="w-full text-left text-gray-700 border-collapse">
                            <tbody>
                                <tr class="border-b border-gray-200">
                                    <td class="py-1 px-4 font-medium">in (bên trong)</td>
                                    <td class="py-1 px-4 italic">The cat is in the box.</td>
                                </tr>
                                <tr class="border-b border-gray-200">
                                    <td class="py-1 px-4 font-medium">on (trên bề mặt)</td>
                                    <td class="py-1 px-4 italic">The book is on the table.</td>
                                </tr>
                                <tr class="border-b border-gray-200">
                                    <td class="py-1 px-4 font-medium">under (bên dưới)</td>
                                    <td class="py-1 px-4 italic">The dog is under the chair.</td>
                                </tr>
                                <tr class="border-b border-gray-200">
                                    <td class="py-1 px-4 font-medium">between (giữa hai vật)</td>
                                    <td class="py-1 px-4 italic">The ball is between the boxes.</td>
                                </tr>
                                <tr class="border-b border-gray-200">
                                    <td class="py-1 px-4 font-medium">next to (bên cạnh)</td>
                                    <td class="py-1 px-4 italic">She sits next to me.</td>
                                </tr>
                                <tr>
                                    <td class="py-1 px-4 font-medium">in front of (phía trước)</td>
                                    <td class="py-1 px-4 italic">The car is in front of the house.</td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="bg-blue-100 p-2 rounded mt-2">
                            <p class="text-blue-800 font-medium">💡 Remember (Ghi nhớ):</p>
                            <p class="text-gray-700">Use "in" for enclosed spaces, "on" for surfaces, "at" for specific
                                locations.</p>
                            <p class="text-gray-700">Dùng "in" cho không gian kín, "on" cho bề mặt, "at" cho địa điểm
                                cụ thể.</p>
                        </div>
                    </div>

                    <div class="info-card bg-purple-50">
                        <h4 class="subsection-title">4. Prepositions of time (Giới từ chỉ thời gian)</h4>
                        <p class="text-gray-700 mb-3">Prepositions of time indicate when something happens.</p>
                        <p class="text-gray-700 mb-3">Giới từ chỉ thời gian diễn tả khi nào sự việc xảy ra.</p>
                        <table class="w-full text-left text-gray-700 border-collapse">
                            <tbody>
                                <tr class="border-b border-gray-200">
                                    <td class="py-1 px-4 font-medium">at (giờ cụ thể)</td>
                                    <td class="py-1 px-4 italic">at 7 o'clock, at night</td>
                                </tr>
                                <tr class="border-b border-gray-200">
                                    <td class="py-1 px-4 font-medium">on (ngày)</td>
                                    <td class="py-1 px-4 italic">on Monday, on July 4th</td>
                                </tr>
                                <tr class="border-b border-gray-200">
                                    <td class="py-1 px-4 font-medium">in (tháng, năm, mùa...)</td>
                                    <td class="py-1 px-4 italic">in May, in 2023, in summer</td>
                                </tr>
                                <tr class="border-b border-gray-200">
                                    <td class="py-1 px-4 font-medium">for (khoảng thời gian)</td>
                                    <td class="py-1 px-4 italic">for two hours, for a long time</td>
                                </tr>
                                <tr class="border-b border-gray-200">
                                    <td class="py-1 px-4 font-medium">since (từ thời điểm)</td>
                                    <td class="py-1 px-4 italic">since 2010, since last year</td>
                                </tr>
                                <tr>
                                    <td class="py-1 px-4 font-medium">during (trong suốt)</td>
                                    <td class="py-1 px-4 italic">during the lesson, during summer</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="info-card bg-pink-50">
                        <h4 class="subsection-title">5. Prepositions of direction (Giới từ chỉ phương hướng)</h4>
                        <p class="text-gray-700 mb-3">Prepositions of direction indicate movement.</p>
                        <p class="text-gray-700 mb-3">Giới từ chỉ phương hướng diễn tả hướng chuyển động.</p>
                        <table class="w-full text-left text-gray-700 border-collapse">
                            <tbody>
                                <tr class="border-b border-gray-200">
                                    <td class="py-1 px-4 font-medium">to (đến)</td>
                                    <td class="py-1 px-4 italic">I go to school.</td>
                                </tr>
                                <tr class="border-b border-gray-200">
                                    <td class="py-1 px-4 font-medium">into (vào trong)</td>
                                    <td class="py-1 px-4 italic">She walks into the room.</td>
                                </tr>
                                <tr class="border-b border-gray-200">
                                    <td class="py-1 px-4 font-medium">out of (ra khỏi)</td>
                                    <td class="py-1 px-4 italic">He runs out of the house.</td>
                                </tr>
                                <tr class="border-b border-gray-200">
                                    <td class="py-1 px-4 font-medium">from (từ)</td>
                                    <td class="py-1 px-4 italic">I come from Vietnam.</td>
                                </tr>
                                <tr class="border-b border-gray-200">
                                    <td class="py-1 px-4 font-medium">towards (về phía)</td>
                                    <td class="py-1 px-4 italic">She walks towards me.</td>
                                </tr>
                                <tr>
                                    <td class="py-1 px-4 font-medium">through (xuyên qua)</td>
                                    <td class="py-1 px-4 italic">We walk through the park.</td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="preposition-map mt-3" id="directionMap">
                            <!-- This will be populated by JavaScript -->
                        </div>
                    </div>

                    <div class="info-card bg-pink-50">
                        <h4 class="subsection-title">6. Position of prepositions in sentences (Vị trí của giới từ trong
                            câu)</h4>
                        <p class="text-gray-700 mb-3">Prepositions usually appear in these positions:</p>
                        <p class="text-gray-700 mb-3">Giới từ thường đứng ở các vị trí sau:</p>
                        <ul class="list-disc pl-5 text-gray-700">
                            <li class="mb-1">Before nouns/pronouns (Trước danh từ/đại từ)<br>
                                <span class="italic">The book is on the table.</span>
                            </li>
                            <li class="mb-1">At the end of sentences (in passive voice) (Cuối câu khi bị động)<br>
                                <span class="italic">She was talked about.</span>
                            </li>
                            <li class="mb-1">After verbs (Sau động từ)<br>
                                <span class="italic">I'm looking for my keys.</span>
                            </li>
                            <li>After adjectives (Sau tính từ)<br>
                                <span class="italic">She's good at math.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Vocabulary -->
            <div class="mb-4">
                <div class="flex items-center mb-2">
                    <div class="w-5 h-5 bg-yellow-400 rounded-full flex items-center justify-center mr-3">
                        <span class="font-bold text-white">2</span>
                    </div>
                    <h3 class="section-title">Part 2: Vocabulary for exercises (Từ vựng cần sử dụng trong bài tập)</h3>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2">
                    <div class="vocab-card">
                        <p class="vocab-word">agriculture <span class="vocab-type">(n)</span> /ˈæɡrɪkʌltʃə/</p>
                        <p class="vocab-meaning">nông nghiệp</p>
                    </div>
                    <div class="vocab-card">
                        <p class="vocab-word">engineering <span class="vocab-type">(n)</span> /ˌendʒɪˈnɪərɪŋ/</p>
                        <p class="vocab-meaning">ngành kĩ sư</p>
                    </div>
                    <div class="vocab-card">
                        <p class="vocab-word">assembly worker <span class="vocab-type">(n)</span> /əˈsembli ˈwɜːkə/</p>
                        <p class="vocab-meaning">công nhân dây chuyền</p>
                    </div>
                    <div class="vocab-card">
                        <p class="vocab-word">bartender <span class="vocab-type">(n)</span> /ˈbɑːtendə/</p>
                        <p class="vocab-meaning">thợ pha chế đồ uống có cồn</p>
                    </div>
                    <div class="vocab-card">
                        <p class="vocab-word">career <span class="vocab-type">(n)</span> /kəˈrɪə/</p>
                        <p class="vocab-meaning">sự nghiệp</p>
                    </div>
                    <div class="vocab-card">
                        <p class="vocab-word">cashier <span class="vocab-type">(n)</span> /kæˈʃɪə/</p>
                        <p class="vocab-meaning">thu ngân</p>
                    </div>
                    <div class="vocab-card">
                        <p class="vocab-word">decisive <span class="vocab-type">(adj)</span> /dɪˈsaɪsɪv/</p>
                        <p class="vocab-meaning">quyết đoán</p>
                    </div>
                    <div class="vocab-card">
                        <p class="vocab-word">demanding <span class="vocab-type">(adj)</span> /dɪˈmɑːndɪŋ/</p>
                        <p class="vocab-meaning">(yêu cầu) khắt khe, phức tạp</p>
                    </div>
                    <div class="vocab-card">
                        <p class="vocab-word">fabric <span class="vocab-type">(n)</span> /ˈfæbrɪk/</p>
                        <p class="vocab-meaning">vải vóc</p>
                    </div>
                    <div class="vocab-card">
                        <p class="vocab-word">garment worker <span class="vocab-type">(n)</span> /ˈɡɑːmənt ˈwɜːkə/</p>
                        <p class="vocab-meaning">công nhân may</p>
                    </div>
                    <div class="vocab-card">
                        <p class="vocab-word">hand-eye coordination <span class="vocab-type">(n)</span> /hænd aɪ
                            kəʊˌɔːdɪˈneɪʃn/</p>
                        <p class="vocab-meaning">sự phối hợp tay và mắt</p>
                    </div>
                    <div class="vocab-card">
                        <p class="vocab-word">hands-on <span class="vocab-type">(adj)</span> /ˌhændz ˈɒn/</p>
                        <p class="vocab-meaning">có tính thực tiễn, thực hành</p>
                    </div>
                    <div class="vocab-card">
                        <p class="vocab-word">inquiring <span class="vocab-type">(adj)</span> /ɪnˈkwaɪərɪŋ/</p>
                        <p class="vocab-meaning">ham học hỏi, tìm tòi</p>
                    </div>
                    <div class="vocab-card">
                        <p class="vocab-word">knowledgeable <span class="vocab-type">(adj)</span> /ˈnɒlɪdʒəbl/</p>
                        <p class="vocab-meaning">am hiểu, thông thạo</p>
                    </div>
                    <div class="vocab-card">
                        <p class="vocab-word">mechanic <span class="vocab-type">(n)</span> /məˈkænɪk/</p>
                        <p class="vocab-meaning">thợ sửa chữa</p>
                    </div>
                    <div class="vocab-card">
                        <p class="vocab-word">orientation <span class="vocab-type">(n)</span> /ˌɔːriənˈteɪʃn/</p>
                        <p class="vocab-meaning">sự định hướng</p>
                    </div>
                    <div class="vocab-card">
                        <p class="vocab-word">repetitive <span class="vocab-type">(adj)</span> /rɪˈpetətɪv/</p>
                        <p class="vocab-meaning">lặp đi lặp lại</p>
                    </div>
                    <div class="vocab-card">
                        <p class="vocab-word">rewarding <span class="vocab-type">(adj)</span> /rɪˈwɔːdɪŋ/</p>
                        <p class="vocab-meaning">bổ ích, xứng đáng</p>
                    </div>
                    <div class="vocab-card">
                        <p class="vocab-word">sew <span class="vocab-type">(v)</span> /səʊ/</p>
                        <p class="vocab-meaning">khâu, may vá</p>
                    </div>
                    <div class="vocab-card">
                        <p class="vocab-word">software engineer <span class="vocab-type">(n)</span> /ˈsɒftweər
                            endʒɪˈnɪə/</p>
                        <p class="vocab-meaning">kĩ sư phần mềm</p>
                    </div>
                    <div class="vocab-card">
                        <p class="vocab-word">surgeon <span class="vocab-type">(n)</span> /ˈsɜːdʒən/</p>
                        <p class="vocab-meaning">bác sĩ phẫu thuật</p>
                    </div>
                    <div class="vocab-card">
                        <p class="vocab-word">vocational <span class="vocab-type">(adj)</span> /vəʊˈkeɪʃənl/</p>
                        <p class="vocab-meaning">thuộc về nghề nghiệp, hướng nghiệp</p>
                    </div>
                    <div class="vocab-card">
                        <p class="vocab-word">well-paid <span class="vocab-type">(adj)</span> /ˌwel ˈpeɪd/</p>
                        <p class="vocab-meaning">được trả lương cao</p>
                    </div>
                </div>
            </div>

            <!-- Basic Exercises -->
            <div class="mb-4">
                <div class="flex items-center mb-2">
                    <div class="w-5 h-5 bg-yellow-400 rounded-full flex items-center justify-center mr-3">
                        <span class="font-bold text-white">3</span>
                    </div>
                    <h3 class="section-title">Part 3: Basic Exercises (Bài tập cơ bản)</h3>
                </div>

                <div class="exercise-container">
                    <div class="flex items-start mb-3 w-full">
                        <div>
                            <h4 class="exercise-title">Exercise 1: Choose the correct preposition of place (Chọn giới từ
                                vị trí thích hợp)</h4>
                            <p class="exercise-instruction">👉 Choose the appropriate preposition to complete each
                                sentence:</p>
                            <p class="exercise-instruction text-sm text-blue-600">💡 Hint (Gợi ý): Visualize the position
                                of objects described in the sentences.</p>

                            <div class="grid grid-cols-1 gap-2 mt-3">
                                <div class="flex flex-col sm:flex-row sm:items-center">
                                    <span class="w-full sm:w-auto font-medium text-gray-700 sm:mr-2">The cat is
                                        ________ the box.</span>
                                    <div class="radio-group">
                                        <label class="radio-label">
                                            <input type="radio" name="q1" class="radio-input" value="in"
                                                data-answer="in" onclick="checkAnswer(this)">
                                            <span>in</span>
                                        </label>
                                        <label class="radio-label">
                                            <input type="radio" name="q1" class="radio-input" value="on"
                                                data-answer="in" onclick="checkAnswer(this)">
                                            <span>on</span>
                                        </label>
                                        <label class="radio-label">
                                            <input type="radio" name="q1" class="radio-input" value="at"
                                                data-answer="in" onclick="checkAnswer(this)">
                                            <span>at</span>
                                        </label>
                                    </div>
                                </div>

                                <div class="flex flex-col sm:flex-row sm:items-center">
                                    <span class="w-full sm:w-auto font-medium text-gray-700 sm:mr-2">The keys are
                                        ________ the table.</span>
                                    <div class="radio-group">
                                        <label class="radio-label">
                                            <input type="radio" name="q2" class="radio-input" value="in"
                                                data-answer="on" onclick="checkAnswer(this)">
                                            <span>in</span>
                                        </label>
                                        <label class="radio-label">
                                            <input type="radio" name="q2" class="radio-input" value="on"
                                                data-answer="on" onclick="checkAnswer(this)">
                                            <span>on</span>
                                        </label>
                                        <label class="radio-label">
                                            <input type="radio" name="q2" class="radio-input" value="under"
                                                data-answer="on" onclick="checkAnswer(this)">
                                            <span>under</span>
                                        </label>
                                    </div>
                                </div>

                                <div class="flex flex-col sm:flex-row sm:items-center">
                                    <span class="w-full sm:w-auto font-medium text-gray-700 sm:mr-2">The dog is sleeping
                                        ________ the chair.</span>
                                    <div class="radio-group">
                                        <label class="radio-label">
                                            <input type="radio" name="q3" class="radio-input" value="on"
                                                data-answer="under" onclick="checkAnswer(this)">
                                            <span>on</span>
                                        </label>
                                        <label class="radio-label">
                                            <input type="radio" name="q3" class="radio-input" value="in"
                                                data-answer="under" onclick="checkAnswer(this)">
                                            <span>in</span>
                                        </label>
                                        <label class="radio-label">
                                            <input type="radio" name="q3" class="radio-input" value="under"
                                                data-answer="under" onclick="checkAnswer(this)">
                                            <span>under</span>
                                        </label>
                                    </div>
                                </div>

                                <div class="flex flex-col sm:flex-row sm:items-center">
                                    <span class="w-full sm:w-auto font-medium text-gray-700 sm:mr-2">The ball is
                                        ________ the two boxes.</span>
                                    <div class="radio-group">
                                        <label class="radio-label">
                                            <input type="radio" name="q4" class="radio-input" value="between"
                                                data-answer="between" onclick="checkAnswer(this)">
                                            <span>between</span>
                                        </label>
                                        <label class="radio-label">
                                            <input type="radio" name="q4" class="radio-input" value="next to"
                                                data-answer="between" onclick="checkAnswer(this)">
                                            <span>next to</span>
                                        </label>
                                        <label class="radio-label">
                                            <input type="radio" name="q4" class="radio-input" value="in front of"
                                                data-answer="between" onclick="checkAnswer(this)">
                                            <span>in front of</span>
                                        </label>
                                    </div>
                                </div>

                                <div class="flex flex-col sm:flex-row sm:items-center">
                                    <span class="w-full sm:w-auto font-medium text-gray-700 sm:mr-2">She always sits
                                        ________ me in class.</span>
                                    <div class="radio-group">
                                        <label class="radio-label">
                                            <input type="radio" name="q5" class="radio-input" value="next to"
                                                data-answer="next to" onclick="checkAnswer(this)">
                                            <span>next to</span>
                                        </label>
                                        <label class="radio-label">
                                            <input type="radio" name="q5" class="radio-input" value="between"
                                                data-answer="next to" onclick="checkAnswer(this)">
                                            <span>between</span>
                                        </label>
                                        <label class="radio-label">
                                            <input type="radio" name="q5" class="radio-input" value="under"
                                                data-answer="next to" onclick="checkAnswer(this)">
                                            <span>under</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="exercise-container">
                    <div class="flex items-start mb-4 w-full">
                        <div class="w-full">
                            <h4 class="exercise-title">Exercise 2: Fill in prepositions of time (Điền giới từ thời gian
                                thích hợp)</h4>
                            <p class="exercise-instruction">👉 Fill in the blanks with appropriate prepositions of time:
                            </p>

                            <div class="space-y-4 mt-3">
                                <div class="flex flex-col md:flex-row items-start md:items-center">
                                    <span class="w-full md:w-auto font-medium text-gray-700 md:mr-2">I have English
                                        class ________ Monday mornings.</span>
                                    <input type="text" class="answer-input block print:hidden" data-answer="on"
                                        onblur="checkAnswer(this)">
                                </div>
                                <div class="flex flex-col md:flex-row items-start md:items-center">
                                    <span class="w-full md:w-auto font-medium text-gray-700 md:mr-2">The meeting starts
                                        ________ 9:00 AM.</span>
                                    <input type="text" class="answer-input block print:hidden" data-answer="at"
                                        onblur="checkAnswer(this)">
                                </div>
                                <div class="flex flex-col md:flex-row items-start md:items-center">
                                    <span class="w-full md:w-auto font-medium text-gray-700 md:mr-2">My birthday is
                                        ________ July.</span>
                                    <input type="text" class="answer-input block print:hidden" data-answer="in"
                                        onblur="checkAnswer(this)">
                                </div>
                                <div class="flex flex-col md:flex-row items-start md:items-center">
                                    <span class="w-full md:w-auto font-medium text-gray-700 md:mr-2">We've lived here
                                        ________ 2015.</span>
                                    <input type="text" class="answer-input block print:hidden" data-answer="since"
                                        onblur="checkAnswer(this)">
                                </div>
                                <div class="flex flex-col md:flex-row items-start md:items-center">
                                    <span class="w-full md:w-auto font-medium text-gray-700 md:mr-2">I studied
                                        ________ two hours last night.</span>
                                    <input type="text" class="answer-input block print:hidden" data-answer="for"
                                        onblur="checkAnswer(this)">
                                </div>
                                <div class="flex flex-col md:flex-row items-start md:items-center">
                                    <span class="w-full md:w-auto font-medium text-gray-700 md:mr-2">She fell asleep
                                        ________ the movie.</span>
                                    <input type="text" class="answer-input block print:hidden" data-answer="during"
                                        onblur="checkAnswer(this)">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="exercise-container">
                    <div class="flex items-start mb-4 w-full">
                        <div class="w-full">
                            <h4 class="exercise-title">Exercise 3: Fill in prepositions of direction (Điền giới từ
                                phương hướng)</h4>
                            <p class="exercise-instruction">👉 Fill in the blanks with appropriate prepositions of
                                direction:</p>

                            <div class="space-y-4 mt-3">
                                <div class="flex flex-col md:flex-row items-start md:items-center">
                                    <span class="w-full md:w-auto font-medium text-gray-700 md:mr-2">She walked
                                        ________ the room and closed the door.</span>
                                    <input type="text" class="answer-input block print:hidden" data-answer="into"
                                        onblur="checkAnswer(this)">
                                </div>
                                <div class="flex flex-col md:flex-row items-start md:items-center">
                                    <span class="w-full md:w-auto font-medium text-gray-700 md:mr-2">The cat ran
                                        ________ the house when it saw the dog.</span>
                                    <input type="text" class="answer-input block print:hidden" data-answer="out of"
                                        onblur="checkAnswer(this)">
                                </div>
                                <div class="flex flex-col md:flex-row items-start md:items-center">
                                    <span class="w-full md:w-auto font-medium text-gray-700 md:mr-2">We're driving
                                        ________ the city center now.</span>
                                    <input type="text" class="answer-input block print:hidden" data-answer="towards"
                                        onblur="checkAnswer(this)">
                                </div>
                                <div class="flex flex-col md:flex-row items-start md:items-center">
                                    <span class="w-full md:w-auto font-medium text-gray-700 md:mr-2">The train goes
                                        ________ a tunnel.</span>
                                    <input type="text" class="answer-input block print:hidden" data-answer="through"
                                        onblur="checkAnswer(this)">
                                </div>
                                <div class="flex flex-col md:flex-row items-start md:items-center">
                                    <span class="w-full md:w-auto font-medium text-gray-700 md:mr-2">I come
                                        ________ Vietnam.</span>
                                    <input type="text" class="answer-input block print:hidden" data-answer="from"
                                        onblur="checkAnswer(this)">
                                </div>
                                <div class="flex flex-col md:flex-row items-start md:items-center">
                                    <span class="w-full md:w-auto font-medium text-gray-700 md:mr-2">Let's go
                                        ________ the park this afternoon.</span>
                                    <input type="text" class="answer-input block print:hidden" data-answer="to"
                                        onblur="checkAnswer(this)">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Advanced Exercises -->
            <div class="mb-4">
                <div class="flex items-center mb-2">
                    <div class="w-5 h-5 bg-yellow-400 rounded-full flex items-center justify-center mr-3">
                        <span class="font-bold text-white">4</span>
                    </div>
                    <h3 class="section-title">Part 4: Advanced Exercises (Bài tập nâng cao)</h3>
                </div>

                <div class="exercise-container">
                    <div class="flex items-start mb-4 w-full">
                        <div class="w-full">
                            <h4 class="exercise-title">Exercise 4: Rearrange the words to make sentences (Sắp xếp các từ
                                thành câu hoàn chỉnh)</h4>
                            <p class="exercise-instruction">👉 Drag and drop the words to form correct sentences:</p>

                            <div class="mt-3">
                                <div class="mb-4">
                                    <p class="font-medium text-gray-700 mb-2">1. table / the / book / on / is / the</p>
                                    <div class="drop-zone" id="dropZone1" ondrop="drop(event)" ondragover="allowDrop(event)">
                                        <!-- Words will be dropped here -->
                                    </div>
                                    <div class="flex flex-wrap gap-2 mt-2">
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word1">table</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word2">the</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word3">book</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word4">on</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word5">is</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word6">the</div>
                                    </div>
                                    <button onclick="checkSentence('dropZone1', 'The book is on the table.')" class="mt-2 bg-blue-500 text-white px-3 py-1 rounded text-sm">Check Answer</button>
                                </div>

                                <div class="mb-4">
                                    <p class="font-medium text-gray-700 mb-2">2. school / to / she / goes / every / day</p>
                                    <div class="drop-zone" id="dropZone2" ondrop="drop(event)" ondragover="allowDrop(event)">
                                        <!-- Words will be dropped here -->
                                    </div>
                                    <div class="flex flex-wrap gap-2 mt-2">
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word7">school</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word8">to</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word9">she</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word10">goes</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word11">every</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word12">day</div>
                                    </div>
                                    <button onclick="checkSentence('dropZone2', 'She goes to school every day.')" class="mt-2 bg-blue-500 text-white px-3 py-1 rounded text-sm">Check Answer</button>
                                </div>

                                <div class="mb-4">
                                    <p class="font-medium text-gray-700 mb-2">3. keys / looking / I'm / my / for</p>
                                    <div class="drop-zone" id="dropZone3" ondrop="drop(event)" ondragover="allowDrop(event)">
                                        <!-- Words will be dropped here -->
                                    </div>
                                    <div class="flex flex-wrap gap-2 mt-2">
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word13">keys</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word14">looking</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word15">I'm</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word16">my</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word17">for</div>
                                    </div>
                                    <button onclick="checkSentence('dropZone3', 'I\'m looking for my keys.')" class="mt-2 bg-blue-500 text-white px-3 py-1 rounded text-sm">Check Answer</button>
                                </div>

                                <div class="mb-4">
                                    <p class="font-medium text-gray-700 mb-2">4. the / walked / through / forest / we / during / night / the</p>
                                    <div class="drop-zone" id="dropZone4" ondrop="drop(event)" ondragover="allowDrop(event)">
                                        <!-- Words will be dropped here -->
                                    </div>
                                    <div class="flex flex-wrap gap-2 mt-2">
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word18">the</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word19">walked</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word20">through</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word21">forest</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word22">we</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word23">during</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word24">night</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word25">the</div>
                                    </div>
                                    <button onclick="checkSentence('dropZone4', 'We walked through the forest during the night.')" class="mt-2 bg-blue-500 text-white px-3 py-1 rounded text-sm">Check Answer</button>
                                </div>

                                <div class="mb-4">
                                    <p class="font-medium text-gray-700 mb-2">5. has / since / been / working / she / at / the / hospital / 2020</p>
                                    <div class="drop-zone" id="dropZone5" ondrop="drop(event)" ondragover="allowDrop(event)">
                                        <!-- Words will be dropped here -->
                                    </div>
                                    <div class="flex flex-wrap gap-2 mt-2">
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word26">has</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word27">since</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word28">been</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word29">working</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word30">she</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word31">at</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word32">the</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word33">hospital</div>
                                        <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="word34">2020</div>
                                    </div>
                                    <button onclick="checkSentence('dropZone5', 'She has been working at the hospital since 2020.')" class="mt-2 bg-blue-500 text-white px-3 py-1 rounded text-sm">Check Answer</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="exercise-container">
                    <div class="flex items-start mb-4 w-full">
                        <div class="w-full">
                            <h4 class="exercise-title">Exercise 5: Rewrite sentences with appropriate prepositions (Viết
                                lại câu sử dụng giới từ thích hợp)</h4>
                            <p class="exercise-instruction">👉 Rewrite the following sentences using appropriate
                                prepositions:</p>

                            <div class="space-y-4 mt-3">
                                <div class="flex flex-col sm:flex-row sm:items-center w-full">
                                    <span class="font-medium text-gray-700">The book is (the table).</span>
                                    <input type="text" class="answer-input flex-1"
                                        data-answer="The book is on the table." onblur="checkAnswer(this)">
                                </div>
                                <div class="flex flex-col sm:flex-row sm:items-center w-full">
                                    <span class="font-medium text-gray-700">She works (a hospital).</span>
                                    <input type="text" class="answer-input flex-1"
                                        data-answer="She works in a hospital." onblur="checkAnswer(this)">
                                </div>
                                <div class="flex flex-col sm:flex-row sm:items-center w-full">
                                    <span class="font-medium text-gray-700">We'll meet (7 PM).</span>
                                    <input type="text" class="answer-input flex-1"
                                        data-answer="We'll meet at 7 PM." onblur="checkAnswer(this)">
                                </div>
                                <div class="flex flex-col sm:flex-row sm:items-center w-full">
                                    <span class="font-medium text-gray-700">The cat jumped (the chair).</span>
                                    <input type="text" class="answer-input flex-1"
                                        data-answer="The cat jumped onto the chair." onblur="checkAnswer(this)">
                                </div>
                                <div class="flex flex-col sm:flex-row sm:items-center w-full">
                                    <span class="font-medium text-gray-700">He's good (math).</span>
                                    <input type="text" class="answer-input flex-1"
                                        data-answer="He's good at math." onblur="checkAnswer(this)">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="exercise-container">
                    <div class="flex items-start mb-4 w-full">
                        <div class="w-full">
                            <h4 class="exercise-title">Exercise 6: Điền từ vào đoạn văn (Fill in the blanks)</h4>
                            <p class="exercise-instruction">👉 Chọn giới từ thích hợp từ ngân hàng từ để điền vào chỗ trống:</p>

                            <div class="mb-4 p-3 bg-blue-50 rounded-lg border">
                                <p class="font-semibold mb-2">📝 Word Bank (Ngân hàng từ):</p>
                                <div class="grid grid-cols-5 gap-2">
                                    <span class="p-2 bg-white rounded border text-center font-medium">in</span>
                                    <span class="p-2 bg-white rounded border text-center font-medium">of</span>
                                    <span class="p-2 bg-white rounded border text-center font-medium">for</span>
                                    <span class="p-2 bg-white rounded border text-center font-medium">at</span>
                                    <span class="p-2 bg-white rounded border text-center font-medium">on</span>
                                </div>
                            </div>

                            <div class="bg-gray-50 p-4 rounded-lg mb-4">
                                <p class="text-gray-700 leading-relaxed">
                                    Maria works (1) 
                                    <select class="answer-input border rounded px-2 py-1" data-answer="at" onchange="checkAnswer(this)">
                                        <option value="">Choose...</option>
                                        <option value="at">at</option>
                                        <option value="in">in</option>
                                        <option value="on">on</option>
                                        <option value="for">for</option>
                                        <option value="of">of</option>
                                    </select>
                                    a garment factory. 
                                    She stands (2) 
                                    <select class="answer-input border rounded px-2 py-1" data-answer="at" onchange="checkAnswer(this)">
                                        <option value="">Choose...</option>
                                        <option value="at">at</option>
                                        <option value="in">in</option>
                                        <option value="on">on</option>
                                        <option value="for">for</option>
                                        <option value="of">of</option>
                                    </select>
                                    a sewing machine 
                                    (3) 
                                    <select class="answer-input border rounded px-2 py-1" data-answer="for" onchange="checkAnswer(this)">
                                        <option value="">Choose...</option>
                                        <option value="at">at</option>
                                        <option value="in">in</option>
                                        <option value="on">on</option>
                                        <option value="for">for</option>
                                        <option value="of">of</option>
                                    </select>
                                    8 hours every day. 
                                    The factory is located (4) 
                                    <select class="answer-input border rounded px-2 py-1" data-answer="in" onchange="checkAnswer(this)">
                                        <option value="">Choose...</option>
                                        <option value="at">at</option>
                                        <option value="in">in</option>
                                        <option value="on">on</option>
                                        <option value="for">for</option>
                                        <option value="of">of</option>
                                    </select>
                                    the industrial zone 
                                    (5) 
                                    <select class="answer-input border rounded px-2 py-1" data-answer="of" onchange="checkAnswer(this)">
                                        <option value="">Choose...</option>
                                        <option value="at">at</option>
                                        <option value="in">in</option>
                                        <option value="on">on</option>
                                        <option value="for">for</option>
                                        <option value="of">of</option>
                                    </select>
                                    the city. 
                                    Maria's career (6) 
                                    <select class="answer-input border rounded px-2 py-1" data-answer="in" onchange="checkAnswer(this)">
                                        <option value="">Choose...</option>
                                        <option value="at">at</option>
                                        <option value="in">in</option>
                                        <option value="on">on</option>
                                        <option value="for">for</option>
                                        <option value="of">of</option>
                                    </select>
                                    the garment industry started 
                                    (7) 
                                    <select class="answer-input border rounded px-2 py-1" data-answer="in" onchange="checkAnswer(this)">
                                        <option value="">Choose...</option>
                                        <option value="at">at</option>
                                        <option value="in">in</option>
                                        <option value="on">on</option>
                                        <option value="for">for</option>
                                        <option value="of">of</option>
                                    </select>
                                    2015. 
                                    She is good (8) 
                                    <select class="answer-input border rounded px-2 py-1" data-answer="at" onchange="checkAnswer(this)">
                                        <option value="">Choose...</option>
                                        <option value="at">at</option>
                                        <option value="in">in</option>
                                        <option value="on">on</option>
                                        <option value="for">for</option>
                                        <option value="of">of</option>
                                    </select>
                                    her job but dreams 
                                    (9) 
                                    <select class="answer-input border rounded px-2 py-1" data-answer="of" onchange="checkAnswer(this)">
                                        <option value="">Choose...</option>
                                        <option value="at">at</option>
                                        <option value="in">in</option>
                                        <option value="on">on</option>
                                        <option value="for">for</option>
                                        <option value="of">of</option>
                                    </select>
                                    working 
                                    (10) 
                                    <select class="answer-input border rounded px-2 py-1" data-answer="in" onchange="checkAnswer(this)">
                                        <option value="">Choose...</option>
                                        <option value="at">at</option>
                                        <option value="in">in</option>
                                        <option value="on">on</option>
                                        <option value="for">for</option>
                                        <option value="of">of</option>
                                    </select>
                                    agriculture someday.
                                </p>
                            </div>

                            <div class="mt-4 bg-green-100 p-3 rounded-lg">
                                <p class="font-bold text-green-800 text-lg">💡 Gợi ý (Hints):</p>
                                <ul class="text-green-700 text-sm mt-2 space-y-1">
                                    <li>• "at" - dùng cho địa điểm cụ thể, giờ giấc</li>
                                    <li>• "in" - dùng cho không gian rộng, năm, tháng</li>
                                    <li>• "for" - dùng cho khoảng thời gian</li>
                                    <li>• "of" - dùng để chỉ sở hữu, thuộc về</li>
                                    <li>• "on" - dùng cho bề mặt, ngày cụ thể</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Common functions for worksheets

        // Function to print the worksheet
        function printWorksheet() {
            window.print();
        }

        // Function to check answers in input fields
        function checkAnswer(input) {
            const userAnswer = input.value ? input.value.toLowerCase().trim().replace(/[.,!?]/g, '') : input.checked ? input.value : '';
            const correctAnswer = input.dataset.answer.toLowerCase().trim().replace(/[.,!?]/g, '');
            
            // Handle radio buttons
            if (input.type === 'radio') {
                const radioGroup = document.getElementsByName(input.name);
                radioGroup.forEach(radio => {
                    const container = radio.closest('.radio-group');
                    // Reset all containers first
                    container.classList.remove('bg-green-100', 'border-green-500', 'bg-red-100', 'border-red-500');

                    // Always show correct answer in green
                    if (radio.value === correctAnswer) {
                        radio.closest('.radio-label').classList.add('text-green-600', 'font-bold');
                    } else {
                        radio.closest('.radio-label').classList.remove('text-green-600', 'font-bold');
                    }

                    // If this is the selected answer and it's wrong, show it in red
                    if (radio.checked && userAnswer !== correctAnswer) {
                        radio.closest('.radio-label').classList.add('text-red-600', 'font-bold');
                    } else {
                        radio.closest('.radio-label').classList.remove('text-red-600', 'font-bold');
                    }
                });
                return;
            }

            // Handle text inputs
            if (userAnswer === correctAnswer) {
                input.classList.remove('border-red-500', 'bg-red-100', 'rounded-md');
                input.classList.add('border-green-500', 'bg-green-100', 'rounded-md');
            } else if (userAnswer !== '') {
                input.classList.remove('border-green-500', 'bg-green-100', 'rounded-md');
                input.classList.add('border-red-500', 'bg-red-100', 'rounded-md');
            }
        }

        // Function to toggle answer visibility
        function toggleAnswer(button) {
            const answer = button.nextElementSibling;
            answer.classList.toggle('hidden');
            button.textContent = answer.classList.contains('hidden') ? 'Show Answer (Xem đáp án)' : 'Hide Answer (Ẩn đáp án)';
        }

        // Function to highlight phrases in sentences
        function highlightPhrase(element) {
            const text = element.querySelector('p').textContent;
            const phrasesToHighlight = element.dataset.phrases ? element.dataset.phrases.split(',') : [];

            let highlightedText = text;

            // Highlight each phrase
            phrasesToHighlight.forEach(phrase => {
                const cleanPhrase = phrase.trim();
                if (cleanPhrase) {
                    // Create a case-insensitive regex for the phrase
                    const regex = new RegExp(`\\b${cleanPhrase}\\b`, 'gi');
                    highlightedText = highlightedText.replace(regex, match => `<span class="bg-yellow-200">${match}</span>`);
                }
            });

            element.querySelector('p').innerHTML = highlightedText;
        }

        // Drag and drop functions
        function allowDrop(ev) {
            ev.preventDefault();
        }

        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.id);
            ev.target.classList.add('dragging');
        }

        function drop(ev) {
            ev.preventDefault();
            const data = ev.dataTransfer.getData("text");
            const draggedElement = document.getElementById(data);
            
            // Check if we're dropping on another draggable item
            if (ev.target.classList.contains('draggable-item')) {
                // Insert before the element we're dropping on
                ev.target.parentNode.insertBefore(draggedElement, ev.target);
            } else {
                // Append to the drop zone
                ev.target.appendChild(draggedElement);
            }
            
            draggedElement.classList.remove('dragging');
        }

        // Function to check if the sentence is correct
        function checkSentence(dropZoneId, correctSentence) {
            const dropZone = document.getElementById(dropZoneId);
            const words = Array.from(dropZone.children).map(word => word.textContent);
            const userSentence = words.join(' ').toLowerCase().replace(/[.,!?]/g, '');
            const correctAnswer = correctSentence.toLowerCase().replace(/[.,!?]/g, '');
            
            if (userSentence === correctAnswer) {
                dropZone.classList.remove('border-red-500', 'bg-red-100');
                dropZone.classList.add('border-green-500', 'bg-green-100');
            } else {
                dropZone.classList.remove('border-green-500', 'bg-green-100');
                dropZone.classList.add('border-red-500', 'bg-red-100');
            }
        }

        // Create direction map visualization
        document.addEventListener('DOMContentLoaded', function() {
            const directionMap = document.getElementById('directionMap');
            
            // Create destination icons
            const home = document.createElement('div');
            home.className = 'destination-icon';
            home.style.left = '50px';
            home.style.top = '50px';
            home.textContent = '🏠';
            home.title = 'Home';
            directionMap.appendChild(home);
            
            const school = document.createElement('div');
            school.className = 'destination-icon';
            school.style.left = '200px';
            school.style.top = '150px';
            school.textContent = '🏫';
            school.title = 'School';
            directionMap.appendChild(school);
            
            const park = document.createElement('div');
            park.className = 'destination-icon';
            park.style.left = '150px';
            park.style.top = '250px';
            park.textContent = '🌳';
            park.title = 'Park';
            directionMap.appendChild(park);
            
            // Create arrows with prepositions
            const arrow1 = document.createElement('div');
            arrow1.className = 'arrow';
            arrow1.style.left = '80px';
            arrow1.style.top = '65px';
            arrow1.style.width = '120px';
            arrow1.style.transform = 'rotate(30deg)';
            arrow1.title = 'to';
            directionMap.appendChild(arrow1);
            
            const arrow2 = document.createElement('div');
            arrow2.className = 'arrow';
            arrow2.style.left = '220px';
            arrow2.style.top = '165px';
            arrow2.style.width = '80px';
            arrow2.style.transform = 'rotate(120deg)';
            arrow2.title = 'towards';
            directionMap.appendChild(arrow2);
            
            const arrow3 = document.createElement('div');
            arrow3.className = 'arrow';
            arrow3.style.left = '100px';
            arrow3.style.top = '180px';
            arrow3.style.width = '100px';
            arrow3.style.transform = 'rotate(-45deg)';
            arrow3.title = 'from';
            directionMap.appendChild(arrow3);
            
            const arrow4 = document.createElement('div');
            arrow4.className = 'arrow';
            arrow4.style.left = '170px';
            arrow4.style.top = '100px';
            arrow4.style.width = '50px';
            arrow4.style.transform = 'rotate(90deg)';
            arrow4.title = 'into';
            directionMap.appendChild(arrow4);
            
            const arrow5 = document.createElement('div');
            arrow5.className = 'arrow';
            arrow5.style.left = '130px';
            arrow5.style.top = '220px';
            arrow5.style.width = '120px';
            arrow5.style.transform = 'rotate(-30deg)';
            arrow5.title = 'through';
            directionMap.appendChild(arrow5);
        });
    </script>
</body>

</html>